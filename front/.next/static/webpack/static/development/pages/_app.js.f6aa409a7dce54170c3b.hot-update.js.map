{"version":3,"file":"static/webpack/static/development/pages/_app.js.f6aa409a7dce54170c3b.hot-update.js","sources":["webpack:///./sagas/user.js"],"sourcesContent":["import { all, fork, takeLatest, takeEvery, call, put, take, delay } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, SIGN_UP_REQUEST, SIGN_UP_FAILURE, SIGN_UP_SUCCESS } from '../reducers/user';\n/*\n\n-사가 yield 이펙트 정리-\nnext : 따로 작성할 필요없고 사가가 알아서 이펙트가 실행될 때 마다 해줌\ntake : 다른 사가를 기다림.\ntakeLatest :  해당 사가 실행완료 될때 까지 기다렸다가 액션 실행\nput: 사가의 dispatch\nfork : 함수를 실행해줌 (비동기호출)\ncall : 함수를 실행해줌 (동기 호출 ex)콜백 로직이 중요한 로그인 로직 )\n\n**\n 사가 구성 3종 세트\n api 콜 함수 - 실행(실제 동작) 함수 - watch 함수\n**\n\n*/\n\n//서버에 로그인 요청\nfunction loginAPI() {\n\n  return axios.post('/login');\n}\n\nfunction* login() {\n  try {\n    // yield call(loginAPI);\n    yield delay(2000);\n    yield put({ // put은 dispatch 동일\n      type: LOG_IN_SUCCESS,\n    });\n  } catch (e) { // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: LOG_IN_FAILURE,\n    });\n  }\n}\n//로그인이라는 액션을 기다리고\n//LOG_IN 이라는 타입으 액션이 실행될때까지 기다렸다가 login 함수 실행\nfunction* watchLogin() {\n  yield takeEvery(LOG_IN_REQUEST, login);\n}\n\nfunction signUpAPI() {\n  // 서버에 요청을 보내는 부분\n  return axios.post('/login'); //api 주소 \n}\n\nfunction* signUp() {\n  try {\n    // yield call(signUpAPI);\n    yield call(signUpAPI, action.data); //sinUpAPI함수에 action.data를 인자로 넣는다.\n    //throw new Error('에러!'); //일부러 에러내기\n    yield put({ // put은 dispatch 동일\n      type: SIGN_UP_SUCCESS,\n    });\n  } catch (e) { // loginAPI 실패\n    console.error(e);\n    yield put({\n      type: SIGN_UP_FAILURE,\n      error: e\n    });\n  }\n}\n\nfunction* watchSignUp() {\n  yield takeEvery(SIGN_UP_REQUEST, signUp);\n}\n\nexport default function* userSaga() {\n  yield all([\n    fork(watchLogin),\n    fork(watchSignUp),\n  ]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA0BA;;;AAgBA;;;AASA;;;AAiBA;;;AAIA;AACA;AAzEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAgBA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAJA;AAAA;AAIA;AAAA;AACA;AADA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAOA;AACA;AARA;AASA;AACA;AADA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAJA;AAAA;AAKA;AAAA;AACA;AADA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAQA;AACA;AATA;AAUA;AACA;AACA;AAFA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}